__NUXT_JSONP__("/posts/Recuperando%20roteadores%20com%20tftp%20via%20dnsmasq", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){return {data:[{page:{slug:p,layout:"post",titulo:p,date:"2021-02-15 15:40",author:"Hiure",categories:"redescomunitarias",imagem:"images\u002Fterminal.png",descricao:"Como criar um servidor tftp para recuperar roteador com firmware bricado",ativo:"sim",toc:[{id:q,depth:m,text:r},{id:s,depth:m,text:t},{id:u,depth:m,text:v}],body:{type:"root",children:[{type:b,tag:d,props:{},children:[{type:a,value:"Muitas vezes o roteador parece que morreu, e quando isso acontece precisamos fazer algumas mandingas para ressusitar o bixinho.\nE a maneira mais conssistente e segura de fazer isso é via tftp, porem existem n maneiras de fazer isso e muitas precisam de milhares de passos e, para mim pelo menos, sempre davam erradas... davam até eu conhecer essa maneira, via dnsmasq (viva meu guro Gui!)"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"O dnsmasq está presente nos sistemas baseados em linux a muito tempo e servem para resolver nomes, porem ele tem esse adicional ai que cria um servidor tftp de maneira muito simples e integrada ao sistema."}]},{type:a,value:c},{type:b,tag:"h1",props:{id:"guia-definitivo-do-tftp-simples-como-você-nunca-viu"},children:[{type:b,tag:e,props:{href:"#guia-definitivo-do-tftp-simples-como-voc%C3%AA-nunca-viu",ariaHidden:h,tabIndex:i},children:[{type:b,tag:j,props:{className:[k,l]},children:[]}]},{type:a,value:"Guia definitivo do tftp, simples como você nunca viu."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Esse método foi testado utilizando um wdr3500_v1 e um ArcherC5_v1."}]},{type:a,value:c},{type:b,tag:n,props:{id:q},children:[{type:b,tag:e,props:{href:"#requisitos",ariaHidden:h,tabIndex:i},children:[{type:b,tag:j,props:{className:[k,l]},children:[]}]},{type:a,value:r}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:"https:\u002F\u002Fpackages.debian.org\u002Fsearch?keywords=dnsmasq",rel:[w,x,y],target:z},children:[{type:a,value:"dnsmasq"}]},{type:a,value:c},{type:b,tag:e,props:{href:"https:\u002F\u002Fwww.tcpdump.org\u002Fmanpages\u002Ftcpdump.1.html",rel:[w,x,y],target:z},children:[{type:a,value:"tcpdump"}]}]},{type:a,value:c},{type:b,tag:n,props:{id:s},children:[{type:b,tag:e,props:{href:"#--fixando-endere%C3%A7os-para-o-tftp",ariaHidden:h,tabIndex:i},children:[{type:b,tag:j,props:{className:[k,l]},children:[]}]},{type:a,value:t}]},{type:a,value:c},{type:b,tag:o,props:{},children:[{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Conecte o roteador pelo cabo"}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Entre em modo de recuperação no roteador (procure como fazer isso para o seu roteador, normalmente segurando o reset e ligar ele até a luizinha ficar piscando como louca)"}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Use o tcpdump para identificar o endereço que o roteador procura:"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:A}]}]},{type:a,value:c},{type:b,tag:o,props:{},children:[{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Com sistemas baseados em openwrt esse endereço costuma ser:"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:"div",props:{className:["nuxt-content-highlight"]},children:[{type:b,tag:"pre",props:{className:["language-text","line-numbers"]},children:[{type:b,tag:f,props:{},children:[{type:a,value:"endereço 192.168.0.66\nmascara 255.255.255.0\ngateway 192.168.0.86\n"}]}]}]},{type:a,value:c},{type:b,tag:o,props:{},children:[{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Fixe seu ip conforme acima"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{id:u},children:[{type:b,tag:e,props:{href:"#--criando-o-servidor-tftp",ariaHidden:h,tabIndex:i},children:[{type:b,tag:j,props:{className:[k,l]},children:[]}]},{type:a,value:v}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Agora com o ip devidamente fixado novamente monitore a interface de cabo de rede com tcpdum."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:A}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Procure pela linha onde o roteador pede pelo arquivo, no caso de um Archer C5 V1 com um firmware baseado em Openwrt o nome é "},{type:b,tag:f,props:{},children:[{type:a,value:"ArcherC5v1_tp_recovery.bin"}]},{type:a,value:".\nBaixe o firmware factory corresponde ao teu roteador e coloque esse nome nele.\nCopie para na pasta "},{type:b,tag:f,props:{},children:[{type:a,value:"\u002Ftmp"}]},{type:a,value:"."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Agora com o roteador conectado pelo cabo e com o arquivo devidamente copiado , rode o seguinte comando:"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:"sudo dnsmasq -d --port=0 \\ --enable-tftp --tftp-root=\u002Ftmp\u002F "}]}]}]},dir:"\u002Fposts",path:"\u002Fposts\u002FRecuperando roteadores com tftp via dnsmasq",extension:".md",createdAt:"2022-02-01T21:04:27.464Z",updatedAt:"2022-02-01T21:51:58.989Z"}}],fetch:{},mutations:void 0}}("text","element","\n","p","a","code","li","true",-1,"span","icon","icon-link",2,"h2","ul","Recuperando roteadores com tftp via dnsmasq","requisitos","Requisitos:","--fixando-endereços-para-o-tftp","- Fixando endereços para o tftp","--criando-o-servidor-tftp","- Criando o servidor tftp","nofollow","noopener","noreferrer","_blank","sudo tcpdump -nli eth0")));